{"ast":null,"code":"import _slicedToArray from \"D:\\\\My_PR\\\\react-audio-player-demo\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"D:\\\\My_PR\\\\react-audio-player-demo\\\\src\\\\AudioPlayer.jsx\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport AudioControls from \"./AudioControls\";\nimport Backdrop from \"./Backdrop\";\nimport \"./styles.css\";\n\n/*\n * Read the blog post here:\n * https://letsbuildui.dev/articles/building-an-audio-player-with-react-hooks\n */\nvar AudioPlayer = function AudioPlayer(_ref) {\n  var tracks = _ref.tracks;\n  // State\n  var _useState = useState(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    trackIndex = _useState2[0],\n    setTrackIndex = _useState2[1];\n  var _useState3 = useState(0),\n    _useState4 = _slicedToArray(_useState3, 2),\n    trackProgress = _useState4[0],\n    setTrackProgress = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isPlaying = _useState6[0],\n    setIsPlaying = _useState6[1];\n\n  // Destructure for conciseness\n  var _tracks$trackIndex = tracks[trackIndex],\n    title = _tracks$trackIndex.title,\n    artist = _tracks$trackIndex.artist,\n    color = _tracks$trackIndex.color,\n    image = _tracks$trackIndex.image,\n    audioSrc = _tracks$trackIndex.audioSrc;\n\n  // Refs\n  var audioRef = useRef(new Audio(audioSrc));\n  var intervalRef = useRef();\n  var isReady = useRef(false);\n\n  // Destructure for conciseness\n  var duration = audioRef.current.duration;\n  var currentPercentage = duration ? \"\".concat(trackProgress / duration * 100, \"%\") : \"0%\";\n  var trackStyling = \"\\n    -webkit-gradient(linear, 0% 0%, 100% 0%, color-stop(\".concat(currentPercentage, \", #fff), color-stop(\").concat(currentPercentage, \", #777))\\n  \");\n  var startTimer = function startTimer() {\n    // Clear any timers already running\n    clearInterval(intervalRef.current);\n    intervalRef.current = setInterval(function () {\n      if (audioRef.current.ended) {\n        toNextTrack();\n      } else {\n        setTrackProgress(audioRef.current.currentTime);\n      }\n    }, [1000]);\n  };\n  var onScrub = function onScrub(value) {\n    // Clear any timers already running\n    clearInterval(intervalRef.current);\n    audioRef.current.currentTime = value;\n    setTrackProgress(audioRef.current.currentTime);\n  };\n  var onScrubEnd = function onScrubEnd() {\n    // If not already playing, start\n    if (!isPlaying) {\n      setIsPlaying(true);\n    }\n    startTimer();\n  };\n  var toPrevTrack = function toPrevTrack() {\n    if (trackIndex - 1 < 0) {\n      setTrackIndex(tracks.length - 1);\n    } else {\n      setTrackIndex(trackIndex - 1);\n    }\n  };\n  var toNextTrack = function toNextTrack() {\n    if (trackIndex < tracks.length - 1) {\n      setTrackIndex(trackIndex + 1);\n    } else {\n      setTrackIndex(0);\n    }\n  };\n  useEffect(function () {\n    if (isPlaying) {\n      audioRef.current.play();\n      startTimer();\n    } else {\n      audioRef.current.pause();\n    }\n  }, [isPlaying]);\n\n  // Handles cleanup and setup when changing tracks\n  useEffect(function () {\n    audioRef.current.pause();\n    audioRef.current = new Audio(audioSrc);\n    setTrackProgress(audioRef.current.currentTime);\n    if (isReady.current) {\n      audioRef.current.play();\n      setIsPlaying(true);\n      startTimer();\n    } else {\n      // Set the isReady ref as true for the next pass\n      isReady.current = true;\n    }\n  }, [trackIndex]);\n  useEffect(function () {\n    // Pause and clean up on unmount\n    return function () {\n      audioRef.current.pause();\n      clearInterval(intervalRef.current);\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"audio-player\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"range\",\n    value: trackProgress,\n    step: \"1\",\n    min: \"0\",\n    max: duration ? duration : \"\".concat(duration),\n    className: \"progress\",\n    onChange: function onChange(e) {\n      return onScrub(e.target.value);\n    },\n    onMouseUp: onScrubEnd,\n    onKeyUp: onScrubEnd,\n    style: {\n      background: trackStyling\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"track-info\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"artwork\",\n    src: image,\n    alt: \"track artwork for \".concat(title, \" by \").concat(artist),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }, title), /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"artist\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }, artist), /*#__PURE__*/React.createElement(AudioControls, {\n    isPlaying: isPlaying,\n    onPrevClick: toPrevTrack,\n    onNextClick: toNextTrack,\n    onPlayPauseClick: setIsPlaying,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Backdrop, {\n    trackIndex: trackIndex,\n    activeColor: color,\n    isPlaying: isPlaying,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }\n  }));\n};\nexport default AudioPlayer;","map":{"version":3,"names":["React","useState","useEffect","useRef","AudioControls","Backdrop","AudioPlayer","tracks","trackIndex","setTrackIndex","trackProgress","setTrackProgress","isPlaying","setIsPlaying","title","artist","color","image","audioSrc","audioRef","Audio","intervalRef","isReady","duration","current","currentPercentage","trackStyling","startTimer","clearInterval","setInterval","ended","toNextTrack","currentTime","onScrub","value","onScrubEnd","toPrevTrack","length","play","pause","e","target","background"],"sources":["D:/My_PR/react-audio-player-demo/src/AudioPlayer.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport AudioControls from \"./AudioControls\";\nimport Backdrop from \"./Backdrop\";\nimport \"./styles.css\";\n\n/*\n * Read the blog post here:\n * https://letsbuildui.dev/articles/building-an-audio-player-with-react-hooks\n */\nconst AudioPlayer = ({ tracks }) => {\n  // State\n  const [trackIndex, setTrackIndex] = useState(0);\n  const [trackProgress, setTrackProgress] = useState(0);\n  const [isPlaying, setIsPlaying] = useState(false);\n\n  // Destructure for conciseness\n  const { title, artist, color, image, audioSrc } = tracks[trackIndex];\n\n  // Refs\n  const audioRef = useRef(new Audio(audioSrc));\n  const intervalRef = useRef();\n  const isReady = useRef(false);\n\n  // Destructure for conciseness\n  const { duration } = audioRef.current;\n\n  const currentPercentage = duration\n    ? `${(trackProgress / duration) * 100}%`\n    : \"0%\";\n  const trackStyling = `\n    -webkit-gradient(linear, 0% 0%, 100% 0%, color-stop(${currentPercentage}, #fff), color-stop(${currentPercentage}, #777))\n  `;\n\n  const startTimer = () => {\n    // Clear any timers already running\n    clearInterval(intervalRef.current);\n\n    intervalRef.current = setInterval(() => {\n      if (audioRef.current.ended) {\n        toNextTrack();\n      } else {\n        setTrackProgress(audioRef.current.currentTime);\n      }\n    }, [1000]);\n  };\n\n  const onScrub = (value) => {\n    // Clear any timers already running\n    clearInterval(intervalRef.current);\n    audioRef.current.currentTime = value;\n    setTrackProgress(audioRef.current.currentTime);\n  };\n\n  const onScrubEnd = () => {\n    // If not already playing, start\n    if (!isPlaying) {\n      setIsPlaying(true);\n    }\n    startTimer();\n  };\n\n  const toPrevTrack = () => {\n    if (trackIndex - 1 < 0) {\n      setTrackIndex(tracks.length - 1);\n    } else {\n      setTrackIndex(trackIndex - 1);\n    }\n  };\n\n  const toNextTrack = () => {\n    if (trackIndex < tracks.length - 1) {\n      setTrackIndex(trackIndex + 1);\n    } else {\n      setTrackIndex(0);\n    }\n  };\n\n  useEffect(() => {\n    if (isPlaying) {\n      audioRef.current.play();\n      startTimer();\n    } else {\n      audioRef.current.pause();\n    }\n  }, [isPlaying]);\n\n  // Handles cleanup and setup when changing tracks\n  useEffect(() => {\n    audioRef.current.pause();\n\n    audioRef.current = new Audio(audioSrc);\n    setTrackProgress(audioRef.current.currentTime);\n\n    if (isReady.current) {\n      audioRef.current.play();\n      setIsPlaying(true);\n      startTimer();\n    } else {\n      // Set the isReady ref as true for the next pass\n      isReady.current = true;\n    }\n  }, [trackIndex]);\n\n  useEffect(() => {\n    // Pause and clean up on unmount\n    return () => {\n      audioRef.current.pause();\n      clearInterval(intervalRef.current);\n    };\n  }, []);\n\n  return (\n    <div className=\"audio-player\">\n              <input\n          type=\"range\"\n          value={trackProgress}\n          step=\"1\"\n          min=\"0\"\n          max={duration ? duration : `${duration}`}\n          className=\"progress\"\n          onChange={(e) => onScrub(e.target.value)}\n          onMouseUp={onScrubEnd}\n          onKeyUp={onScrubEnd}\n          style={{ background: trackStyling }}\n        />\n      <div className=\"track-info\">\n        <img\n          className=\"artwork\"\n          src={image}\n          alt={`track artwork for ${title} by ${artist}`}\n        />\n        <h2 className=\"title\">{title}</h2>\n        <h3 className=\"artist\">{artist}</h3>\n        <AudioControls\n          isPlaying={isPlaying}\n          onPrevClick={toPrevTrack}\n          onNextClick={toNextTrack}\n          onPlayPauseClick={setIsPlaying}\n        />\n\n      </div>\n      <Backdrop\n        trackIndex={trackIndex}\n        activeColor={color}\n        isPlaying={isPlaying}\n      />\n    </div>\n  );\n};\n\nexport default AudioPlayer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}